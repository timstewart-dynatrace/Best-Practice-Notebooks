<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500">
  <defs>
    <linearGradient id="k8sBg" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0f172a"/>
      <stop offset="100%" style="stop-color:#1e293b"/>
    </linearGradient>
    <linearGradient id="k8sCluster" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#326ce5"/>
      <stop offset="100%" style="stop-color:#1e4eb8"/>
    </linearGradient>
    <linearGradient id="agPod" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#14b8a6"/>
      <stop offset="100%" style="stop-color:#0d9488"/>
    </linearGradient>
    <linearGradient id="service" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6"/>
      <stop offset="100%" style="stop-color:#7c3aed"/>
    </linearGradient>
    <linearGradient id="storage" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b"/>
      <stop offset="100%" style="stop-color:#d97706"/>
    </linearGradient>
    <linearGradient id="dynatrace" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#6366f1"/>
      <stop offset="100%" style="stop-color:#4f46e5"/>
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.3"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="800" height="500" fill="url(#k8sBg)"/>

  <!-- Title -->
  <text x="400" y="35" text-anchor="middle" fill="#e2e8f0" font-family="system-ui, sans-serif" font-size="18" font-weight="bold">ActiveGate Kubernetes Deployment Architecture</text>

  <!-- Kubernetes Cluster Box -->
  <rect x="40" y="60" width="520" height="380" rx="12" fill="none" stroke="#326ce5" stroke-width="2" stroke-dasharray="8,4"/>
  <rect x="40" y="60" width="180" height="28" rx="6" fill="url(#k8sCluster)"/>
  <text x="130" y="79" text-anchor="middle" fill="white" font-family="system-ui, sans-serif" font-size="12" font-weight="bold">Kubernetes Cluster</text>

  <!-- dynatrace namespace -->
  <rect x="60" y="100" width="480" height="320" rx="8" fill="rgba(50, 108, 229, 0.1)" stroke="#326ce5" stroke-width="1"/>
  <text x="80" y="120" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="11">namespace: dynatrace</text>

  <!-- StatefulSet Box -->
  <rect x="80" y="140" width="280" height="180" rx="6" fill="rgba(20, 184, 166, 0.1)" stroke="#14b8a6" stroke-width="1" stroke-dasharray="4,2"/>
  <text x="100" y="158" fill="#5eead4" font-family="system-ui, sans-serif" font-size="11" font-weight="bold">StatefulSet: activegate</text>

  <!-- ActiveGate Pod 1 -->
  <rect x="100" y="175" width="110" height="70" rx="6" fill="url(#agPod)" filter="url(#shadow)"/>
  <text x="155" y="200" text-anchor="middle" fill="white" font-family="system-ui, sans-serif" font-size="11" font-weight="bold">ActiveGate-0</text>
  <text x="155" y="218" text-anchor="middle" fill="#ccfbf1" font-family="system-ui, sans-serif" font-size="10">Pod</text>
  <text x="155" y="235" text-anchor="middle" fill="#ccfbf1" font-family="system-ui, sans-serif" font-size="9">:9999</text>

  <!-- ActiveGate Pod 2 -->
  <rect x="230" y="175" width="110" height="70" rx="6" fill="url(#agPod)" filter="url(#shadow)"/>
  <text x="285" y="200" text-anchor="middle" fill="white" font-family="system-ui, sans-serif" font-size="11" font-weight="bold">ActiveGate-1</text>
  <text x="285" y="218" text-anchor="middle" fill="#ccfbf1" font-family="system-ui, sans-serif" font-size="10">Pod</text>
  <text x="285" y="235" text-anchor="middle" fill="#ccfbf1" font-family="system-ui, sans-serif" font-size="9">:9999</text>

  <!-- PVC 1 -->
  <rect x="100" y="260" width="110" height="45" rx="4" fill="url(#storage)" filter="url(#shadow)"/>
  <text x="155" y="282" text-anchor="middle" fill="white" font-family="system-ui, sans-serif" font-size="10" font-weight="bold">PVC</text>
  <text x="155" y="296" text-anchor="middle" fill="#fef3c7" font-family="system-ui, sans-serif" font-size="9">ag-data-0</text>

  <!-- PVC 2 -->
  <rect x="230" y="260" width="110" height="45" rx="4" fill="url(#storage)" filter="url(#shadow)"/>
  <text x="285" y="282" text-anchor="middle" fill="white" font-family="system-ui, sans-serif" font-size="10" font-weight="bold">PVC</text>
  <text x="285" y="296" text-anchor="middle" fill="#fef3c7" font-family="system-ui, sans-serif" font-size="9">ag-data-1</text>

  <!-- Services -->
  <rect x="390" y="140" width="130" height="55" rx="6" fill="url(#service)" filter="url(#shadow)"/>
  <text x="455" y="162" text-anchor="middle" fill="white" font-family="system-ui, sans-serif" font-size="11" font-weight="bold">ClusterIP</text>
  <text x="455" y="178" text-anchor="middle" fill="#e9d5ff" font-family="system-ui, sans-serif" font-size="10">activegate:443</text>
  <text x="455" y="190" text-anchor="middle" fill="#c4b5fd" font-family="system-ui, sans-serif" font-size="9">(internal)</text>

  <rect x="390" y="210" width="130" height="55" rx="6" fill="url(#service)" filter="url(#shadow)"/>
  <text x="455" y="232" text-anchor="middle" fill="white" font-family="system-ui, sans-serif" font-size="11" font-weight="bold">LoadBalancer</text>
  <text x="455" y="248" text-anchor="middle" fill="#e9d5ff" font-family="system-ui, sans-serif" font-size="10">activegate-ext:443</text>
  <text x="455" y="260" text-anchor="middle" fill="#c4b5fd" font-family="system-ui, sans-serif" font-size="9">(external access)</text>

  <!-- ConfigMap & Secret -->
  <rect x="390" y="280" width="60" height="40" rx="4" fill="#475569" filter="url(#shadow)"/>
  <text x="420" y="300" text-anchor="middle" fill="white" font-family="system-ui, sans-serif" font-size="9" font-weight="bold">Secret</text>
  <text x="420" y="312" text-anchor="middle" fill="#cbd5e1" font-family="system-ui, sans-serif" font-size="8">tokens</text>

  <rect x="460" y="280" width="60" height="40" rx="4" fill="#475569" filter="url(#shadow)"/>
  <text x="490" y="300" text-anchor="middle" fill="white" font-family="system-ui, sans-serif" font-size="9" font-weight="bold">ConfigMap</text>
  <text x="490" y="312" text-anchor="middle" fill="#cbd5e1" font-family="system-ui, sans-serif" font-size="8">config</text>

  <!-- OneAgents in cluster -->
  <rect x="80" y="335" width="260" height="70" rx="6" fill="rgba(100, 116, 139, 0.2)" stroke="#64748b" stroke-width="1"/>
  <text x="210" y="355" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="11" font-weight="bold">Application Pods (with OneAgent)</text>
  <rect x="100" y="365" width="50" height="30" rx="3" fill="#64748b"/>
  <text x="125" y="384" text-anchor="middle" fill="white" font-family="system-ui, sans-serif" font-size="9">Pod</text>
  <rect x="160" y="365" width="50" height="30" rx="3" fill="#64748b"/>
  <text x="185" y="384" text-anchor="middle" fill="white" font-family="system-ui, sans-serif" font-size="9">Pod</text>
  <rect x="220" y="365" width="50" height="30" rx="3" fill="#64748b"/>
  <text x="245" y="384" text-anchor="middle" fill="white" font-family="system-ui, sans-serif" font-size="9">Pod</text>
  <rect x="280" y="365" width="50" height="30" rx="3" fill="#64748b"/>
  <text x="305" y="384" text-anchor="middle" fill="white" font-family="system-ui, sans-serif" font-size="9">Pod</text>

  <!-- Dynatrace SaaS -->
  <rect x="600" y="130" width="170" height="120" rx="8" fill="url(#dynatrace)" filter="url(#shadow)"/>
  <text x="685" y="165" text-anchor="middle" fill="white" font-family="system-ui, sans-serif" font-size="14" font-weight="bold">Dynatrace</text>
  <text x="685" y="185" text-anchor="middle" fill="#c7d2fe" font-family="system-ui, sans-serif" font-size="12">SaaS</text>
  <text x="685" y="210" text-anchor="middle" fill="#a5b4fc" font-family="system-ui, sans-serif" font-size="10">*.live.dynatrace.com</text>
  <text x="685" y="230" text-anchor="middle" fill="#a5b4fc" font-family="system-ui, sans-serif" font-size="10">HTTPS :443</text>

  <!-- External Hosts -->
  <rect x="600" y="280" width="170" height="80" rx="8" fill="#374151" filter="url(#shadow)"/>
  <text x="685" y="310" text-anchor="middle" fill="white" font-family="system-ui, sans-serif" font-size="12" font-weight="bold">External Hosts</text>
  <text x="685" y="330" text-anchor="middle" fill="#9ca3af" font-family="system-ui, sans-serif" font-size="10">VMs / Bare Metal</text>
  <text x="685" y="348" text-anchor="middle" fill="#9ca3af" font-family="system-ui, sans-serif" font-size="10">(OneAgent)</text>

  <!-- Connection Lines -->
  <!-- Pods to AG -->
  <path d="M 210 335 L 210 320 L 170 320 L 170 250" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowGray)"/>
  <path d="M 210 335 L 210 320 L 260 320 L 260 250" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowGray)"/>

  <!-- AG to ClusterIP Service -->
  <path d="M 360 200 L 390 167" stroke="#14b8a6" stroke-width="2" fill="none"/>

  <!-- ClusterIP to AG pods -->
  <line x1="390" y1="167" x2="340" y2="200" stroke="#8b5cf6" stroke-width="1.5" stroke-dasharray="4,2"/>

  <!-- AG to Dynatrace -->
  <path d="M 360 200 L 530 200 L 530 180 L 600 180" stroke="#14b8a6" stroke-width="2" fill="none" marker-end="url(#arrowTeal)"/>
  <text x="480" y="195" fill="#5eead4" font-family="system-ui, sans-serif" font-size="9">HTTPS</text>

  <!-- LoadBalancer to External -->
  <path d="M 520 237 L 560 237 L 560 320 L 600 320" stroke="#8b5cf6" stroke-width="2" fill="none" marker-end="url(#arrowPurple)"/>

  <!-- External to LoadBalancer -->
  <path d="M 600 310 L 575 310 L 575 245 L 520 245" stroke="#9ca3af" stroke-width="1.5" stroke-dasharray="4,2" fill="none"/>
  <text x="575" y="275" fill="#9ca3af" font-family="system-ui, sans-serif" font-size="9">:443</text>

  <!-- Arrows -->
  <defs>
    <marker id="arrowTeal" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#14b8a6"/>
    </marker>
    <marker id="arrowPurple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#8b5cf6"/>
    </marker>
    <marker id="arrowGray" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
    </marker>
  </defs>

  <!-- Legend -->
  <rect x="600" y="385" width="170" height="95" rx="6" fill="rgba(30, 41, 59, 0.8)" stroke="#334155" stroke-width="1"/>
  <text x="685" y="405" text-anchor="middle" fill="#e2e8f0" font-family="system-ui, sans-serif" font-size="11" font-weight="bold">Legend</text>

  <rect x="615" y="415" width="12" height="12" rx="2" fill="url(#agPod)"/>
  <text x="635" y="425" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10">ActiveGate Pod</text>

  <rect x="615" y="433" width="12" height="12" rx="2" fill="url(#service)"/>
  <text x="635" y="443" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10">Kubernetes Service</text>

  <rect x="615" y="451" width="12" height="12" rx="2" fill="url(#storage)"/>
  <text x="635" y="461" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10">Persistent Storage</text>

  <line x1="615" y1="475" x2="627" y2="475" stroke="#14b8a6" stroke-width="2"/>
  <text x="635" y="478" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10">Data Flow</text>
</svg>