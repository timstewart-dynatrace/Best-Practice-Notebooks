{"version":"7","defaultTimeframe":{"from":"now()-2h","to":"now()"},"defaultSegments":[],"sections":[{"id":"5e8f434d-af68-434f-a75c-11057e51e45f","type":"markdown","markdown":"# Your First Queries\n\n> **Series:** ONBRD | **Notebook:** 8 of 10 | **Created:** December 2025\n\n## Learning DQL Fundamentals\n\nDynatrace Query Language (DQL) is how you access data in Grail. This notebook introduces the core concepts and patterns you'll use daily.\n\n---\n\n## Table of Contents\n\n1. DQL Basics\n2. The Pipeline Model\n3. Fetching Data\n4. Filtering\n5. Selecting Fields\n6. Aggregating with Summarize\n7. Sorting and Limiting\n8. Time Ranges\n9. Common Patterns\n10. Next Steps\n\n---\n\n## Prerequisites\n\n- Dynatrace environment with data (ONBRD-05, ONBRD-06, ONBRD-07)\n- DQL query permissions\n- Access to Notebooks or the DQL query interface"},{"id":"6572d002-d7f8-4cdb-a484-e566136ff498","type":"markdown","markdown":"## 1. DQL Basics\n\nDQL is a **pipeline-based query language**â€”not SQL. Data flows through a series of commands connected by the pipe (`|`) operator.\n\n![DQL Pipeline](../images/dql-pipeline.svg)\n<!-- MARKDOWN_TABLE_ALTERNATIVE\n| Stage | Command | Result |\n|-------|---------|--------|\n| 1 | fetch logs | All logs |\n| 2 | filter status | Only errors |\n| 3 | fields select | Just fields we need |\n| 4 | sort order | Ordered output |\n-->\n\n### DQL vs SQL\n\n| DQL | SQL | Note |\n|-----|-----|------|\n| `fetch logs` | `SELECT * FROM logs` | Start with data source |\n| `\\| filter x == \"y\"` | `WHERE x = 'y'` | Use `==`, double quotes |\n| `\\| fields a, b` | `SELECT a, b` | Field selection after fetch |\n| `\\| summarize count()` | `SELECT COUNT(*)` | Aggregation command |\n| `by: {field}` | `GROUP BY field` | Grouping syntax |\n| `{\"a\", \"b\"}` | `('a', 'b')` | Array syntax (curly braces) |"},{"id":"175e9fc7-4c95-4aba-9dd0-9e3ce997d946","type":"markdown","markdown":"## 2. The Pipeline Model\n\nEach command in the pipeline operates on the output of the previous command:"},{"id":"4879212f-697f-4c18-a715-80309f2ef720","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"fetch logs                        // 1. Get all logs\n| filter loglevel == \"error\"     // 2. Keep only errors\n| filter timestamp > now() - 1h  // 3. Last hour only\n| fields timestamp, content      // 4. Select columns\n| sort timestamp desc            // 5. Order by time\n| limit 100                      // 6. Take first 100"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"42466fc9-8e93-4c92-9887-e911eb331e27","type":"markdown","markdown":"### Order Matters\n\n- **Filter early** - Reduces data before expensive operations\n- **Select fields** - Reduces memory usage\n- **Aggregate** - Summarize before sorting\n- **Sort** - Order the final results\n- **Limit** - Control output size"},{"id":"fa7643d2-853a-48c9-a547-c3f524e8f0d7","type":"markdown","markdown":"## 3. Fetching Data\n\nEvery DQL query starts with a `fetch` command specifying the data source."},{"id":"df3a2410-6f11-4967-9c42-927522df460a","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Fetch logs (most common)\nfetch logs\n| limit 10"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"d6013e74-d9ce-464f-86ae-b3792b0e9b4b","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Fetch spans (distributed traces)\nfetch spans\n| limit 10"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"0a3de436-f177-4c52-818a-0e24b2ff69c0","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Fetch entity data (hosts)\nfetch dt.entity.host\n| limit 10"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"c7032779-12c4-4d36-8e28-ed93343e6a7e","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Fetch problems\nfetch dt.davis.problems\n| limit 10"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"1b0c9b00-0556-4ee7-813c-958510598e49","type":"markdown","markdown":"### Common Data Sources\n\n| Source | Description |\n|--------|-------------|\n| `logs` | Log records |\n| `spans` | Distributed trace spans |\n| `events` | System events |\n| `bizevents` | Business events |\n| `dt.entity.host` | Host entities |\n| `dt.entity.service` | Service entities |\n| `dt.entity.process_group` | Process group entities |\n| `dt.davis.problems` | Detected problems |"},{"id":"5469b78e-b2a6-469f-a438-62be2d03d0cf","type":"markdown","markdown":"## 4. Filtering\n\nUse `filter` to narrow results. Filter as early as possible for performance."},{"id":"58695984-6824-49db-916c-b4c99256ad9c","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Filter by equality\nfetch logs\n| filter loglevel == \"error\"\n| limit 20"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"1d67f3d3-0ae5-460f-86f0-3ff2d09e1687","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Filter with multiple conditions (AND)\nfetch logs\n| filter loglevel == \"error\"\n| filter timestamp > now() - 1h\n| limit 20"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"995b694d-5727-46be-80d8-0279f37da69b","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Filter with OR condition\nfetch logs\n| filter loglevel == \"error\" or loglevel == \"warn\"\n| limit 20"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"467509c8-d9be-423c-9a83-3602c2119cfc","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Filter using IN for multiple values\nfetch logs\n| filter in(loglevel, {\"error\", \"warn\", \"fatal\"})\n| limit 20"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"afbcc9f9-481b-4dd7-95b4-191dcd6f1aa6","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Filter with string matching\nfetch logs\n| filter contains(content, \"timeout\")\n| limit 20"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"898eeef9-fe26-4ddc-9674-fdfbc06e2a24","type":"markdown","markdown":"### Filter Operators\n\n| Operator | Example | Description |\n|----------|---------|-------------|\n| `==` | `field == \"value\"` | Equals |\n| `!=` | `field != \"value\"` | Not equals |\n| `>`, `<` | `count > 10` | Greater/less than |\n| `>=`, `<=` | `count >= 10` | Greater/less or equal |\n| `and`, `or` | `a == 1 and b == 2` | Logical operators |\n| `in()` | `in(field, {\"a\", \"b\"})` | Value in set |\n| `contains()` | `contains(field, \"text\")` | Substring match |\n| `isNull()` | `isNull(field)` | Field is null |\n| `isNotNull()` | `isNotNull(field)` | Field is not null |"},{"id":"8710dc62-7fab-4a86-a324-b4e29dcd35fb","type":"markdown","markdown":"## 5. Selecting Fields\n\nUse `fields` to select specific columns. This improves readability and performance."},{"id":"5728f6b5-4d43-4729-94c6-613ab837376a","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Select specific fields from logs\nfetch logs\n| fields timestamp, loglevel, log.source, content\n| limit 20"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"afa5624f-38aa-462e-a3c9-2d21dac8f4d5","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Create calculated fields\nfetch spans\n| fields span.name, \nduration,\nduration_ms = duration / 1000000.0\n| limit 20"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"1d44ae83-4a47-404e-95bf-95bb276097f9","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Rename fields with aliases\nfetch dt.entity.host\n| fields name = entity.name,\nstatus = state,\nos = osType\n| limit 20"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"cfa2ec3a-86a7-4f4c-93ae-5a46503a65b8","type":"markdown","markdown":"### fieldsAdd vs fields\n\n| Command | Effect |\n|---------|--------|\n| `fields` | Keeps only specified fields |\n| `fieldsAdd` | Adds new fields, keeps all existing |"},{"id":"a9b40d2e-03f0-43f6-8eb5-3d9acb3ce0a1","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// fieldsAdd keeps existing fields and adds new ones\nfetch spans\n| fieldsAdd duration_ms = duration / 1000000.0\n| fields span.name, duration, duration_ms\n| limit 10"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"84bd9616-d1e4-4ec6-8867-addfa132849b","type":"markdown","markdown":"## 6. Aggregating with Summarize\n\nUse `summarize` to aggregate data. Combine with `by:` for grouping."},{"id":"3bc18513-f5f1-408a-a958-099be38edb4c","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Simple count\nfetch logs, from: now() - 1h\n| summarize total_logs = count()"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"7d4afff1-e3ef-4922-950b-45b14e962069","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Count by group\nfetch logs, from: now() - 1h\n| summarize log_count = count(), by: {loglevel}\n| sort log_count desc"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"88a3f5cb-8865-46ab-bc81-058e97f4cbb9","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Multiple aggregations\nfetch spans, from: now() - 1h\n| filter span.kind == \"server\"\n| summarize \nrequest_count = count(),\navg_duration = avg(duration),\nmax_duration = max(duration),\nby: {service.name}\n| sort request_count desc\n| limit 20"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"9786af6c-3163-4c02-97fe-c4c3d46950f9","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Conditional counting\nfetch spans, from: now() - 1h\n| filter span.kind == \"server\"\n| summarize\ntotal = count(),\nerrors = countIf(span.status_code == \"error\"),\nby: {service.name}\n| fieldsAdd error_rate = 100.0 * errors / total\n| sort error_rate desc\n| limit 20"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"d19227b7-81e0-4c56-a4cd-b0553087da22","type":"markdown","markdown":"### Common Aggregation Functions\n\n| Function | Description |\n|----------|-------------|\n| `count()` | Count records |\n| `countIf(condition)` | Count where condition is true |\n| `sum(field)` | Sum values |\n| `avg(field)` | Average value |\n| `min(field)` | Minimum value |\n| `max(field)` | Maximum value |\n| `percentile(field, 95)` | 95th percentile |"},{"id":"0e7dcb0c-24ea-43ad-9800-a3c62e856bcc","type":"markdown","markdown":"## 7. Sorting and Limiting\n\nControl output order and size."},{"id":"3d44d599-6717-4fa6-b126-9cb4067dbb71","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Sort descending (newest first)\nfetch logs, from: now() - 1h\n| fields timestamp, loglevel, content\n| sort timestamp desc\n| limit 20"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"ba3f4dba-2a68-4294-9cdf-9a46d2bca69b","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Sort by multiple fields\nfetch spans, from: now() - 1h\n| filter span.kind == \"server\"\n| summarize request_count = count(), by: {service.name}\n| sort request_count desc\n| limit 10"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"5b9fd2c0-76bd-4ff3-bbe0-f8049f03bd16","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Find slowest spans\nfetch spans, from: now() - 1h\n| fields span.name, service.name, duration\n| sort duration desc\n| limit 10"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"2e577630-efcd-4fce-ab32-753038cf52c9","type":"markdown","markdown":"## 8. Time Ranges\n\nControl the time range for your queries."},{"id":"563d70e9-d065-42d2-8ac5-6c9b7645aadf","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Last hour (using from: parameter)\nfetch logs, from: now() - 1h\n| summarize count()"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"d5c64d38-c009-4393-a118-ba2bf8c5ec1f","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Specific time range\nfetch logs, from: now() - 24h, to: now() - 12h\n| summarize count()"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"e9b01298-7dee-4109-a028-f75108510cb0","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Last 7 days\nfetch dt.davis.problems, from: now() - 7d\n| summarize problem_count = count(), by: {status}"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"4772553b-6b79-4703-965c-93b46e9efeef","type":"markdown","markdown":"### Time Units\n\n| Unit | Example | Description |\n|------|---------|-------------|\n| `s` | `now() - 30s` | Seconds |\n| `m` | `now() - 15m` | Minutes |\n| `h` | `now() - 2h` | Hours |\n| `d` | `now() - 7d` | Days |"},{"id":"218108a9-0fc2-4a8a-9667-22bd364d6035","type":"markdown","markdown":"## 9. Common Patterns\n\nHere are patterns you'll use frequently."},{"id":"a6ae3ed8-984d-4c02-b896-8638e5905bca","type":"markdown","markdown":"### Error Investigation"},{"id":"40f1cf2f-cd5f-455a-a253-87cca1f5bc39","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Find error logs with context\nfetch logs, from: now() - 1h\n| filter loglevel == \"error\"\n| fields timestamp, log.source, content\n| sort timestamp desc\n| limit 50"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"934bbfe4-d1d5-4ad1-aea0-319c1760a169","type":"markdown","markdown":"### Service Performance"},{"id":"e742735a-e531-44a6-ba58-220fe0c47915","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Service response time summary\nfetch spans, from: now() - 1h\n| filter span.kind == \"server\"\n| summarize\nrequests = count(),\navg_ms = avg(duration) / 1000000.0,\np95_ms = percentile(duration, 95) / 1000000.0,\nby: {service.name}\n| sort requests desc\n| limit 20"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"cdd5f8cd-b57c-4714-8c99-f9cc2e5a96ac","type":"markdown","markdown":"### Log Volume Analysis"},{"id":"2e724d61-4f90-4fa1-a9cb-c722a1479a57","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Log volume by source and severity\nfetch logs, from: now() - 1h\n| summarize log_count = count(), by: {log.source, loglevel}\n| sort log_count desc\n| limit 30"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"edd3c168-b4d3-4376-b3c1-33c3ade8176d","type":"markdown","markdown":"### Entity Inventory"},{"id":"7281afab-29b2-42a7-b5f3-d5732111b97c","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":250,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"// Host inventory with details\nfetch dt.entity.host\n| fields \nname = entity.name,\nstate,\nos = osType,\ncores = cpuCores\n| sort name\n| limit 50"},"visualizationSettings":{"table":{"hideColumnsForLargeResults":true},"autoSelectVisualization":true,"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table"}},{"id":"9131dc17-f45f-4eb9-ba10-75639c4aa835","type":"markdown","markdown":"## 10. Next Steps\n\nWith DQL fundamentals covered:\n\n1. **ONBRD-09: Setting Up Alerts** - Configure alerting and notifications\n2. Practice with your own data\n3. Explore the DQL documentation for advanced functions\n4. Try creating queries in Notebooks\n\n### DQL Checklist\n\n- [ ] Understand the pipeline model\n- [ ] Can fetch different data types\n- [ ] Can filter with conditions\n- [ ] Can select and calculate fields\n- [ ] Can aggregate with summarize\n- [ ] Can sort and limit results\n- [ ] Can specify time ranges\n\n---\n\n## Summary\n\nIn this notebook, you learned:\n\n- DQL uses a pipeline model (not SQL)\n- `fetch` starts every query\n- `filter` narrows results\n- `fields` selects and calculates columns\n- `summarize` aggregates data\n- `sort` and `limit` control output\n- Time ranges with `from:` and `to:`\n\n---\n\n## References\n\n- [DQL Reference](https://docs.dynatrace.com/docs/platform/grail/dynatrace-query-language)\n- [DQL Functions](https://docs.dynatrace.com/docs/platform/grail/dynatrace-query-language/functions)\n- [DQL Commands](https://docs.dynatrace.com/docs/platform/grail/dynatrace-query-language/commands)\n- [DQL Examples](https://docs.dynatrace.com/docs/platform/grail/dynatrace-query-language/dql-examples)"}],"name":"--ONBRD-08-your-first-queries"}