<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 300">
  <defs>
    <linearGradient id="mpInputGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#334155;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#475569;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="mpPipe1Grad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#a855f7;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="mpPipe2Grad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#60a5fa;stop-opacity:1" />
    </linearGradient>
    <filter id="mpShadow">
      <feDropShadow dx="1" dy="1" stdDeviation="2" flood-opacity="0.15"/>
    </filter>
    <marker id="mpArrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="600" height="300" fill="#f8f9fa" rx="10"/>

  <!-- Title -->
  <text x="300" y="25" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1e293b" text-anchor="middle">Multi-Pipeline: Metrics Extraction + Log Storage</text>

  <!-- Incoming Log -->
  <rect x="30" y="110" width="110" height="50" rx="6" fill="url(#mpInputGrad)" filter="url(#mpShadow)"/>
  <text x="85" y="135" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle" font-weight="bold">Incoming Log</text>
  <text x="85" y="150" font-family="Arial, sans-serif" font-size="10" fill="#94a3b8" text-anchor="middle">payment request</text>

  <!-- Split arrow -->
  <line x1="140" y1="135" x2="175" y2="135" stroke="#64748b" stroke-width="2"/>
  <line x1="175" y1="135" x2="175" y2="75" stroke="#64748b" stroke-width="2"/>
  <line x1="175" y1="135" x2="175" y2="195" stroke="#64748b" stroke-width="2"/>
  <line x1="175" y1="75" x2="195" y2="75" stroke="#64748b" stroke-width="2" marker-end="url(#mpArrow)"/>
  <line x1="175" y1="195" x2="195" y2="195" stroke="#64748b" stroke-width="2" marker-end="url(#mpArrow)"/>

  <!-- Pipeline 1: Metrics Extraction -->
  <rect x="205" y="50" width="170" height="50" rx="6" fill="url(#mpPipe1Grad)" filter="url(#mpShadow)"/>
  <text x="290" y="72" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle" font-weight="bold">Pipeline 1:</text>
  <text x="290" y="88" font-family="Arial, sans-serif" font-size="10" fill="rgba(255,255,255,0.9)" text-anchor="middle">metrics-extraction</text>

  <!-- Pipeline 1 actions -->
  <g transform="translate(205, 105)">
    <rect width="170" height="45" rx="4" fill="#ede9fe" stroke="#c4b5fd" stroke-width="1"/>
    <text x="10" y="18" font-family="Arial, sans-serif" font-size="10" fill="#6d28d9">â€¢ Parse response_time</text>
    <text x="10" y="35" font-family="Arial, sans-serif" font-size="10" fill="#6d28d9">â€¢ Extract metric: duration</text>
  </g>

  <!-- Pipeline 1 output arrow -->
  <line x1="375" y1="127" x2="395" y2="127" stroke="#64748b" stroke-width="2" marker-end="url(#mpArrow)"/>

  <!-- Metric Output -->
  <rect x="405" y="105" width="100" height="45" rx="6" fill="#10b981" filter="url(#mpShadow)"/>
  <text x="455" y="123" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle" font-weight="bold">ðŸ“Š METRIC</text>
  <text x="455" y="140" font-family="Arial, sans-serif" font-size="10" fill="rgba(255,255,255,0.9)" text-anchor="middle">request_duration</text>

  <!-- Pipeline 2: Log Storage -->
  <rect x="205" y="170" width="170" height="50" rx="6" fill="url(#mpPipe2Grad)" filter="url(#mpShadow)"/>
  <text x="290" y="192" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle" font-weight="bold">Pipeline 2:</text>
  <text x="290" y="208" font-family="Arial, sans-serif" font-size="10" fill="rgba(255,255,255,0.9)" text-anchor="middle">log-storage</text>

  <!-- Pipeline 2 actions -->
  <g transform="translate(205, 225)">
    <rect width="170" height="45" rx="4" fill="#dbeafe" stroke="#93c5fd" stroke-width="1"/>
    <text x="10" y="18" font-family="Arial, sans-serif" font-size="10" fill="#1d4ed8">â€¢ Parse additional fields</text>
    <text x="10" y="35" font-family="Arial, sans-serif" font-size="10" fill="#1d4ed8">â€¢ Route to bucket</text>
  </g>

  <!-- Pipeline 2 output arrow -->
  <line x1="375" y1="247" x2="395" y2="247" stroke="#64748b" stroke-width="2" marker-end="url(#mpArrow)"/>

  <!-- Log Storage Output -->
  <rect x="405" y="225" width="100" height="45" rx="6" fill="#3b82f6" filter="url(#mpShadow)"/>
  <text x="455" y="243" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle" font-weight="bold">ðŸ“‹ LOG</text>
  <text x="455" y="260" font-family="Arial, sans-serif" font-size="10" fill="rgba(255,255,255,0.9)" text-anchor="middle">payment_logs</text>

  <!-- Result box -->
  <rect x="510" y="155" width="80" height="60" rx="4" fill="#f0fdf4" stroke="#10b981" stroke-width="2"/>
  <text x="550" y="175" font-family="Arial, sans-serif" font-size="10" fill="#166534" text-anchor="middle" font-weight="bold">RESULT</text>
  <text x="550" y="192" font-family="Arial, sans-serif" font-size="10" fill="#166534" text-anchor="middle">Metric âœ“</text>
  <text x="550" y="205" font-family="Arial, sans-serif" font-size="10" fill="#166534" text-anchor="middle">Log âœ“</text>
</svg>
